version: 1

profiles:
  ops:
    description: "Gold ì—†ì´ë„ ê°€ëŠ¥í•œ ìš´ì˜ ìŠ¤ëƒ…ìƒ· ê¸°ë°˜ ê²Œì´íŠ¸"
    required_artifacts:
      - "ops_outputs/run_snapshot.json"
      - "ops_outputs/ops_table.csv"
      - "ops_outputs/top_issues.csv"
    gates:
      - parse_failed_rate
      - generate_failed_rate
      - fallback_used_rate
      - empty_output_rate
      - latency_ms_p95
      - retries_mean
      - tokens_out_mean
      - cost_usd_sum

overall_policy:
  fail_if_any_gate_is: ["FAIL"]
  warn_if_any_gate_is: ["WARN"]
  pass_if_all_gates_in: ["PASS", "N/A"]

rules:
  parse_failed_rate:
    metric_path: "ops.parse_failed_rate"
    meaning: "ì¶œë ¥ íŒŒì‹± ì‹¤íŒ¨ ë¹„ìœ¨"
    criterion: "ìŠ¤í‚¤ë§ˆ/í¬ë§· ë¶•ê´´ ì—¬ë¶€ì˜ 1ì°¨ ìŠ¤ëª¨í¬ ì§€í‘œ"
    thresholds:
      pass: { lte: 0.005 }
      warn: { lte: 0.020 }
      fail: { gt: 0.020 }

  generate_failed_rate:
    metric_path: "ops.generate_failed_rate"
    meaning: "LLM í˜¸ì¶œ/ìƒì„± ì‹¤íŒ¨ ë¹„ìœ¨"
    criterion: "ëŸ° ì•ˆì •ì„±(ë ˆì´íŠ¸ë¦¬ë°‹/ë„¤íŠ¸ì›Œí¬/ëª¨ë¸ ì˜¤ë¥˜) ì§€í‘œ"
    thresholds:
      pass: { lte: 0.003 }
      warn: { lte: 0.010 }
      fail: { gt: 0.010 }

  fallback_used_rate:
    metric_path: "ops.fallback_used_rate"
    meaning: "fallback ì‚¬ìš© ë¹„ìœ¨"
    criterion: "ì •ìƒ ê²½ë¡œ ì‹¤íŒ¨ë¥¼ ìš°íšŒí•œ ì •ë„(í’ˆì§ˆ ë¦¬ìŠ¤í¬)"
    thresholds:
      pass: { lte: 0.010 }
      warn: { lte: 0.050 }
      fail: { gt: 0.050 }

  latency_ms_p95:
    metric_path: "ops.latency_ms_p95"
    meaning: "ì§€ì—°ì‹œê°„ p95 (ms)"
    criterion: "ìš´ì˜ ì‘ë‹µì„±/íƒ€ì„ì•„ì›ƒ ë¦¬ìŠ¤í¬ (smoke/regression: ì™„í™”)"
    thresholds:
      pass: { lte: 20000 }
      warn: { lte: 30000 }
      fail: { gt: 30000 }

  retries_mean:
    metric_path: "ops.retries_mean"
    meaning: "í‰ê·  ì¬ì‹œë„ íšŸìˆ˜"
    criterion: "ë¶ˆì•ˆì •í•œ í˜¸ì¶œ/ì¬ì‹œë„ ëˆ„ì  ì—¬ë¶€"
    thresholds:
      pass: { lte: 0.20 }
      warn: { lte: 0.80 }
      fail: { gt: 0.80 }

  tokens_out_mean:
    metric_path: "ops.tokens_out_mean"
    meaning: "ì¶œë ¥ í† í° í‰ê· "
    criterion: "ì¶œë ¥ í­ì£¼/ë¶ˆí•„ìš” ì¥ë¬¸(ë¹„ìš©/ì§€ì—°) ì´ìƒì§•í›„"
    thresholds:
      pass: { lte: 700 }
      warn: { lte: 1200 }
      fail: { gt: 1200 }

  cost_usd_sum:
    metric_path: "ops.cost_usd_sum"
    meaning: "ì´ ë¹„ìš©(USD)"
    criterion: "ëŸ° ë‹¨ìœ„ ë¹„ìš© ìƒí•œì„ (ìš´ì˜ ì•ˆì „ì¥ì¹˜)"
    thresholds:
      pass: { lte: 5.0 }
      warn: { lte: 15.0 }
      fail: { gt: 15.0 }

  empty_output_rate:
    metric_path: "derived.empty_output_rate"
    meaning: "ë¹ˆ ì¶œë ¥ ë¹„ìœ¨(aspect 0ê°œ ë“±)"
    criterion: "ì‹¤ì§ˆì  ë¬´ì‘ë‹µ/ì¸¡ì •ë¶ˆëŠ¥ ë¹„ìœ¨"
    thresholds:
      pass: { lte: 0.010 }
      warn: { lte: 0.030 }
      fail: { gt: 0.030 }

ui:
  verdict_badges:
    PASS: "âœ… PASS"
    WARN: "âš ï¸ WARN"
    FAIL: "ğŸ›‘ FAIL"
    N_A: "â€” N/A"
  notes:
    - "ì„ê³„ê°’(thresholds)ì€ ì´ˆê¸° ë³´ìˆ˜ì  ê¸°ë³¸ê°’ì´ë©° í”„ë¡œì íŠ¸/ë°ì´í„°ì— ë§ì¶° ì¡°ì •."
    - "ops í”„ë¡œíŒŒì¼ì€ smoke/regression ìš©ë„ë¡œ latency gateê°€ ì™„í™”ë¨."


