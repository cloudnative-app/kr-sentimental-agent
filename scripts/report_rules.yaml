version: 1

profiles:
  ops:
    description: "Gold ì—†ì´ë„ ê°€ëŠ¥í•œ ìš´ì˜ ìŠ¤ëƒ…ìƒ· ê¸°ë°˜ ê²Œì´íŠ¸"
    required_artifacts:
      - "ops_outputs/run_snapshot.json"
      - "ops_outputs/ops_table.csv"
      - "ops_outputs/top_issues.csv"
    gates:
      - parse_failed_rate
      - generate_failed_rate
      - fallback_used_rate
      - empty_output_rate
      - latency_ms_p95
      - retries_mean
      - tokens_out_mean
      - cost_usd_sum

  paper:
    description: "Gold/ë©”íŠ¸ë¦­ í¬í•¨ ì‹œ ë…¼ë¬¸ìš© ì§€í‘œê¹Œì§€ í¬í•¨í•œ ê²Œì´íŠ¸"
    required_artifacts:
      - "ops_outputs/run_snapshot.json"
      - "ops_outputs/ops_table.csv"
      - "ops_outputs/top_issues.csv"
      - "paper_outputs/paper_table_3_main_results.csv"
      - "paper_outputs/paper_table_4_failure_breakdown.csv"
    gates:
      - parse_failed_rate
      - generate_failed_rate
      - fallback_used_rate
      - empty_output_rate
      - latency_ms_p95
      - cost_usd_sum
      - split_overlap_any_rate
      - pass_rate
      - valid_aspect_rate
      - polarity_conflict_rate
      - structural_risk_rate
      - targetless_rate
      - unanchored_rate
      - self_consistency_exact

overall_policy:
  fail_if_any_gate_is: ["FAIL"]
  warn_if_any_gate_is: ["WARN"]
  pass_if_all_gates_in: ["PASS", "N/A"]

rules:
  parse_failed_rate:
    metric_path: "ops.parse_failed_rate"
    meaning: "ì¶œë ¥ íŒŒì‹± ì‹¤íŒ¨ ë¹„ìœ¨"
    criterion: "ìŠ¤í‚¤ë§ˆ/í¬ë§· ë¶•ê´´ ì—¬ë¶€ì˜ 1ì°¨ ìŠ¤ëª¨í¬ ì§€í‘œ"
    thresholds:
      pass: { lte: 0.005 }
      warn: { lte: 0.020 }
      fail: { gt: 0.020 }

  generate_failed_rate:
    metric_path: "ops.generate_failed_rate"
    meaning: "LLM í˜¸ì¶œ/ìƒì„± ì‹¤íŒ¨ ë¹„ìœ¨"
    criterion: "ëŸ° ì•ˆì •ì„±(ë ˆì´íŠ¸ë¦¬ë°‹/ë„¤íŠ¸ì›Œí¬/ëª¨ë¸ ì˜¤ë¥˜) ì§€í‘œ"
    thresholds:
      pass: { lte: 0.003 }
      warn: { lte: 0.010 }
      fail: { gt: 0.010 }

  fallback_used_rate:
    metric_path: "ops.fallback_used_rate"
    meaning: "fallback ì‚¬ìš© ë¹„ìœ¨"
    criterion: "ì •ìƒ ê²½ë¡œ ì‹¤íŒ¨ë¥¼ ìš°íšŒí•œ ì •ë„(í’ˆì§ˆ ë¦¬ìŠ¤í¬)"
    thresholds:
      pass: { lte: 0.010 }
      warn: { lte: 0.050 }
      fail: { gt: 0.050 }

  latency_ms_p95:
    metric_path: "ops.latency_ms_p95"
    meaning: "ì§€ì—°ì‹œê°„ p95 (ms)"
    criterion: "ìš´ì˜ ì‘ë‹µì„±/íƒ€ì„ì•„ì›ƒ ë¦¬ìŠ¤í¬"
    thresholds:
      pass: { lte: 8000 }
      warn: { lte: 15000 }
      fail: { gt: 15000 }

  retries_mean:
    metric_path: "ops.retries_mean"
    meaning: "í‰ê·  ì¬ì‹œë„ íšŸìˆ˜"
    criterion: "ë¶ˆì•ˆì •í•œ í˜¸ì¶œ/ì¬ì‹œë„ ëˆ„ì  ì—¬ë¶€"
    thresholds:
      pass: { lte: 0.20 }
      warn: { lte: 0.80 }
      fail: { gt: 0.80 }

  tokens_out_mean:
    metric_path: "ops.tokens_out_mean"
    meaning: "ì¶œë ¥ í† í° í‰ê· "
    criterion: "ì¶œë ¥ í­ì£¼/ë¶ˆí•„ìš” ì¥ë¬¸(ë¹„ìš©/ì§€ì—°) ì´ìƒì§•í›„"
    thresholds:
      pass: { lte: 700 }
      warn: { lte: 1200 }
      fail: { gt: 1200 }

  cost_usd_sum:
    metric_path: "ops.cost_usd_sum"
    meaning: "ì´ ë¹„ìš©(USD)"
    criterion: "ëŸ° ë‹¨ìœ„ ë¹„ìš© ìƒí•œì„ (ìš´ì˜ ì•ˆì „ì¥ì¹˜)"
    thresholds:
      pass: { lte: 5.0 }
      warn: { lte: 15.0 }
      fail: { gt: 15.0 }

  empty_output_rate:
    metric_path: "derived.empty_output_rate"
    meaning: "ë¹ˆ ì¶œë ¥ ë¹„ìœ¨(aspect 0ê°œ ë“±)"
    criterion: "ì‹¤ì§ˆì  ë¬´ì‘ë‹µ/ì¸¡ì •ë¶ˆëŠ¥ ë¹„ìœ¨"
    thresholds:
      pass: { lte: 0.010 }
      warn: { lte: 0.030 }
      fail: { gt: 0.030 }

  pass_rate:
    metric_path: "paper3.pass_rate"
    meaning: "ì „ì²´ íŒ¨ìŠ¤ ë¹„ìœ¨(ì •ì˜ëœ ê²€ì¦ ê¸°ì¤€ í†µê³¼)"
    criterion: "í”„ë ˆì„ì›Œí¬ ê·œì¹™ ì¤€ìˆ˜/êµ¬ì¡°ì  íƒ€ë‹¹ë„"
    thresholds:
      pass: { gte: 0.97 }
      warn: { gte: 0.94 }
      fail: { lt: 0.94 }

  valid_aspect_rate:
    metric_path: "paper3.valid_aspect_rate"
    meaning: "ìœ íš¨ aspect ë¹„ìœ¨"
    criterion: "aspect ì¶”ì¶œì˜ ê¸°ë³¸ ê±´ì „ì„±"
    thresholds:
      pass: { gte: 0.95 }
      warn: { gte: 0.92 }
      fail: { lt: 0.92 }

  polarity_conflict_rate:
    metric_path: "paper3.polarity_conflict_rate"
    meaning: "ë™ì¼ aspect polarity ì¶©ëŒ ë¹„ìœ¨"
    criterion: "êµ¬ì¡°ì  ì¼ê´€ì„±(ìƒì¶© ì¶œë ¥) ë¦¬ìŠ¤í¬"
    thresholds:
      pass: { lte: 0.010 }
      warn: { lte: 0.030 }
      fail: { gt: 0.030 }

  structural_risk_rate:
    metric_path: "paper4.structural_risk_rate"
    meaning: "Structural Risk ë¹„ìœ¨"
    criterion: "ê·œì¹™ ê¸°ë°˜ êµ¬ì¡° ê²€ì¦ì—ì„œ ìœ„í—˜ ì‹ í˜¸"
    thresholds:
      pass: { lte: 0.020 }
      warn: { lte: 0.050 }
      fail: { gt: 0.050 }

  targetless_rate:
    metric_path: "paper4.targetless_rate"
    meaning: "Targetless ë¹„ìœ¨"
    criterion: "aspect/opinion/target ì—°ê²° ë¶•ê´´"
    thresholds:
      pass: { lte: 0.010 }
      warn: { lte: 0.030 }
      fail: { gt: 0.030 }

  unanchored_rate:
    metric_path: "paper3.unanchored_rate"
    meaning: "Unanchored ë¹„ìœ¨(spanì´ ì›ë¬¸ì— ì—†ê±°ë‚˜ ë¹„ì •ìƒ)"
    criterion: "ì¶”ì¶œ ì •í•©ì„±(anchoring) ì‹¤íŒ¨"
    thresholds:
      pass: { lte: 0.010 }
      warn: { lte: 0.030 }
      fail: { gt: 0.030 }

  self_consistency_exact:
    metric_path: "paper3.self_consistency_exact"
    meaning: "Self-consistency(ë™ì¼ ì…ë ¥ ë°˜ë³µ ì¼ì¹˜ìœ¨)"
    criterion: "ì¶œë ¥ ì•ˆì •ì„±/ì¬í˜„ì„±"
    thresholds:
      pass: { gte: 0.95 }
      warn: { gte: 0.90 }
      fail: { lt: 0.90 }

  split_overlap_any_rate:
    metric_path: "snapshot.integrity.split_overlap_any_rate"
    meaning: "split ê°„ ì¤‘ë³µ ë°ì´í„° ë¹„ìœ¨(train/valid/test êµì§‘í•©)"
    criterion: "ì¼ë°˜í™” ê²€ì¦ ë¬´ê²°ì„±(0ì´ì–´ì•¼ í•¨)"
    thresholds:
      pass: { lte: 0.0 }
      warn: { lte: 0.05 }
      fail: { gt: 0.05 }

ui:
  verdict_badges:
    PASS: "âœ… PASS"
    WARN: "âš ï¸ WARN"
    FAIL: "ğŸ›‘ FAIL"
    N_A: "â€” N/A"
  notes:
    - "ì„ê³„ê°’(thresholds)ì€ ì´ˆê¸° ë³´ìˆ˜ì  ê¸°ë³¸ê°’ì´ë©° í”„ë¡œì íŠ¸/ë°ì´í„°ì— ë§ì¶° ì¡°ì •."
    - "paper í”„ë¡œíŒŒì¼ì€ paper_outputsê°€ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ops í”„ë¡œíŒŒì¼ë¡œ í´ë°± ê°€ëŠ¥."
